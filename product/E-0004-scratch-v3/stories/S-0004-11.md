---
id: S-0004-11
title: "Database filter & sort UI"
status: Backlog
estimate_points: 5
tags: [databases, filters, sorting, ui]
owner: ""
created_at: "2026-02-14"
started_at: ""
completed_at: ""
target_version: "v1.2.0"
commits: []
links:
  epic: E-0004-scratch-v3
---

[← Roadmap](../Scratch v3 Roadmap.md) · Database Enhancements · **1 of 3**
Prev: [← S-0004-10](S-0004-10.md) · Next: [S-0004-12 →](S-0004-12.md)

---

Add a visual filter and sort toolbar to database views, like Notion's filter/sort popover.

## Acceptance Criteria

- [ ] "Filter" button in database toolbar opens a filter builder
- [ ] Filter builder: add conditions with column, operator, value
- [ ] Operators vary by column type (text: contains/equals, number: >/</=, select: is/is not, date: before/after)
- [ ] Multiple filters combined with AND/OR logic
- [ ] "Sort" button opens a sort builder with column + direction (asc/desc)
- [ ] Multiple sort levels (primary, secondary, etc.)
- [ ] Active filters/sorts shown as pills in the toolbar
- [ ] Filters and sorts persisted in the database `_schema.md` view config
- [ ] Filtered row count displayed (e.g., "5 of 12 rows")
- [ ] "Clear all" button to reset filters and sorts

## Technical Notes

**Filter storage in `_schema.md`:**
```yaml
views:
  - id: default
    type: table
    filters:
      - column: status
        operator: is
        value: "In Progress"
    sorts:
      - column: priority
        direction: desc
```

**Frontend:**
- Filter/sort popovers positioned relative to the toolbar buttons
- Reuse Radix UI Popover for consistent styling
- Filter condition rows are dynamically typed based on the selected column
- Client-side filtering on the loaded rows (no backend changes needed)

**Existing infrastructure:** The `DatabaseTable` component already supports sorting via column header clicks. This adds a persistent, multi-column sort plus visual filtering.

## Activity Log

| Date | Event | Details |
|------|-------|---------|
| 2026-02-14 | Created | Story added to E-0004 roadmap |

---
id: S-0004-09
title: "Trash bin with restore"
status: Backlog
estimate_points: 5
tags: [trash, safety, undo]
owner: ""
created_at: "2026-02-14"
started_at: ""
completed_at: ""
target_version: "v1.2.0"
commits: []
links:
  epic: E-0004-scratch-v3
---

[← Roadmap](../Scratch v3 Roadmap.md) · Trash & Version History · **1 of 2**
Prev: [← S-0004-08](S-0004-08.md) · Next: [S-0004-10 →](S-0004-10.md)

---

Soft delete with a trash bin. Deleted notes are recoverable for 30 days before permanent removal.

## Acceptance Criteria

- [ ] Deleting a note moves it to `.scratch/trash/` instead of removing from disk
- [ ] Trash metadata stored alongside each file (original path, deletion timestamp)
- [ ] "Trash" section accessible from sidebar (bottom, with trash icon)
- [ ] Trash view shows deleted notes with deletion date and original location
- [ ] "Restore" action moves the note back to its original folder
- [ ] "Delete permanently" action removes the file from disk
- [ ] "Empty trash" button to permanently delete all trashed notes
- [ ] Auto-purge: notes older than 30 days automatically removed on app startup
- [ ] Trashed notes excluded from search results
- [ ] Trashed notes excluded from wikilink autocomplete

## Technical Notes

**Trash storage:**
```
.scratch/trash/
├── note-title.md              # The note file
└── note-title.meta.json       # { "originalPath": "projects/note-title.md", "deletedAt": "2026-02-14T04:30:00Z" }
```

**Backend changes (lib.rs):**
- `delete_note` becomes `trash_note` — moves file + creates meta
- New `restore_note` — moves file back, deletes meta
- New `empty_trash` — removes all files in trash
- New `list_trash` — returns trashed notes with metadata
- Startup routine: scan trash for notes older than 30 days and purge

**Frontend:**
- Trash section in sidebar with count badge
- Clicking opens a trash panel (similar to search results panel)
- Each trashed note shows: title, deleted date, original folder, restore/delete buttons

## Activity Log

| Date | Event | Details |
|------|-------|---------|
| 2026-02-14 | Created | Story added to E-0004 roadmap |

---
id: S-0003-01
title: "Database schema & file format"
status: "In Progress"
estimate_points: 8
tags: [database, backend, file-format]
owner: "claude"
created_at: "2026-02-13"
started_at: "2026-02-13 21:34"
completed_at: ""
target_version: ""
commits: []
links:
  epic: E-0003-scratch-v2
  blocks: [S-0003-02, S-0003-03, S-0003-04]
---

[← Roadmap](../README.md) · Databases · **1 of 4**
Blocks: [S-0003-02](S-0003-02.md) · [S-0003-03](S-0003-03.md) · [S-0003-04](S-0003-04.md)
Next: [S-0003-02 Table view →](S-0003-02.md)

---

Define the `.db.md` format for markdown-native databases.

## Acceptance Criteria

- [x] Database definition file with YAML frontmatter: columns, types, views
- [x] Column types: text, number, date, select, multi-select, checkbox, relation, url
- [x] Each database = folder with `_schema.md` + row `.md` files
- [x] Row files have frontmatter matching schema + optional markdown body
- [x] Rust backend parses, validates, and CRUDs database rows
- [x] Schema migrations: add/remove/rename columns updates existing rows

## Technical Notes

Generalize `src-tauri/src/stories.rs` kanban pattern into reusable database engine.

```
my-tasks/
  _schema.md       # columns, views, metadata
  row-001.md       # frontmatter fields + markdown body
  row-002.md
```


## Activity Log

| Date | Event | Details |
|------|-------|---------|
| 2026-02-13 | Created | Story added to E-0003 roadmap |
| 2026-02-13 | Started | Implementation begun by claude |
| 2026-02-13 | Design | Schema format: `_schema.md` with YAML frontmatter defining columns array (id, name, type, options), views array, and metadata. Row files: `{slug}.md` with frontmatter matching column names. Column types: text, number, date, select, multi-select, checkbox, relation, url. Auto-incrementing row IDs. Generalizes stories.rs pattern into `src-tauri/src/database.rs`. TypeScript types in `src/types/database.ts`, service in `src/services/database.ts`. |

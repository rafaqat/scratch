---
id: S-0003-09
title: "Bookmark block"
status: Done
estimate_points: 3
tags: [blocks, frontend, blocknote, backend]
owner: "claude"
created_at: "2026-02-13"
started_at: "2026-02-13T21:00:00Z"
completed_at: "2026-02-13"
target_version: ""
commits: []
links:
  epic: E-0003-scratch-v2
---
[← Roadmap](../README.md) · Richer Blocks · **3 of 4**\
\
Prev: [← S-0003-08](S-0003-08.md) · Next: [S-0003-10 →](S-0003-10.md)

***

URL preview cards with title, description, favicon.

## Acceptance Criteria

* [x] `/bookmark` slash command or paste URL to create bookmark block
* [x] Fetches page metadata (title, description, image, favicon) via Tauri backend
* [x] Card display: favicon + title + description + domain
* [x] Click opens URL in default browser
* [x] Graceful fallback when metadata fetch fails (show URL only)
* [x] Cached metadata in frontmatter comment to avoid re-fetching

## Technical Notes

Tauri backend command to fetch URL metadata (use `reqwest` + HTML parsing for og:tags). Cache result in a markdown comment block above the bookmark reference. BlockNote custom block with `createReactBlockSpec`.

## Results

**Files created:**
- `src/components/editor/BookmarkBlock.tsx` - Bookmark block with URL input, metadata fetching, card display, and click-to-open
- `src/lib/bookmark.ts` - Pre/postprocessors for markdown round-trip (HTML comment + URL format)

**Files modified:**
- `src-tauri/Cargo.toml` - Added `reqwest` and `scraper` dependencies
- `src-tauri/src/lib.rs` - Added `fetch_url_metadata` Tauri command with og:tag scraping
- `src/components/editor/schema.ts` - Added bookmark block to BlockNote schema
- `src/components/editor/Editor.tsx` - Added `/bookmark` slash menu item, bookmark pre/postprocessors in save/load pipeline
- `src/App.css` - Added bookmark card styles (editing, loading, card display with image)

## Activity Log

| Date       | Event       | Details                       |
| ---------- | ----------- | ----------------------------- |
| 2026-02-13 | Created     | Story added to E-0003 roadmap |
| 2026-02-13 | Started     | Claimed by claude, implementation begun |
| 2026-02-13 | Design      | Bookmark block as custom BlockNote block. Backend: Tauri command with reqwest to fetch URL and scraper for og:tags. Frontend: Card UI with favicon, title, description, domain. Cache metadata as block props. Markdown serialization as HTML comment + URL line. |
| 2026-02-13 | Implemented | All acceptance criteria complete |
| 2026-02-13 | Done        | Story complete |
